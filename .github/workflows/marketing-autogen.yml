name: Marketing Autogen

on:
  workflow_dispatch:
  schedule:
    - cron: '0 8 * * 1' # Every Monday 8am UTC

jobs:
  marketing-autogen:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11
      - name: Set up Node.js
        uses: actions/setup-node@1e60f620b9540f58f3dc1cb8b01260c4d8c1d9da
        with:
          node-version: 20
      - name: Install dependencies
        run: npm ci
      - name: Generate marketing content
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        run: |
          echo "Generating marketing content..."
          # Placeholder: call script or API to generate content
          echo "# Campaign $(date)" > marketing/campaigns/autogen-$(date +%Y%m%d).md
          echo "Generated by workflow at $(date)" >> marketing/campaigns/autogen-$(date +%Y%m%d).md
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          commit-message: "feat(marketing): add auto-generated campaign content"
          branch: marketing/autogen-${{ github.run_id }}
          title: "Marketing: Auto-generated campaign content"
          body: "This PR adds new marketing campaign content generated by the scheduled workflow."
          labels: marketing, marketing-autogen
